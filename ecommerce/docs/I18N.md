# üåç Internationalization (i18n)

This document explains the custom lightweight internationalization system implemented in the e-commerce platform.

## üéØ Overview

The platform uses a custom, lightweight i18n system that doesn't require external libraries. It's designed to be simple, type-safe, and easy to maintain.

## üèóÔ∏è How It Works

### System Architecture
```
Environment Variable (NEXT_PUBLIC_LOCALE)
    ‚Üì
lib/i18n/index.ts (t() function)
    ‚Üì
lib/i18n/translations.ts (translation object)
    ‚Üì
Translated text in UI
```

### Core Components

#### 1. Translation Storage (`lib/i18n/translations.ts`)
All translations are stored in a single object with nested keys:

```typescript
export const translations = {
  en: {
    "common.loading": "Loading...",
    "products.addToCart": "Add to Cart",
    "cart.title": "Shopping Cart"
  },
  es: {
    "common.loading": "Cargando...",
    "products.addToCart": "Agregar al Carrito",
    "cart.title": "Carrito de Compras"
  },
  pt: {
    "common.loading": "Carregando...",
    "products.addToCart": "Adicionar ao Carrinho",
    "cart.title": "Carrinho de Compras"
  }
}
```

#### 2. Translation Function (`lib/i18n/index.ts`)
Simple function that reads the locale and returns the appropriate translation:

```typescript
export function t(key: string): string {
  const locale = process.env.NEXT_PUBLIC_LOCALE || 'en'
  const localeTranslations = translations[locale as keyof typeof translations]
  
  if (!localeTranslations) {
    console.warn(`Locale '${locale}' not found, falling back to 'en'`)
    return translations.en[key as keyof typeof translations.en] || key
  }
  
  return localeTranslations[key as keyof typeof translations.en] || key
}
```

#### 3. Environment Variable (`NEXT_PUBLIC_LOCALE`)
Controls the site language. Set in `.env.local`:

```bash
NEXT_PUBLIC_LOCALE=en  # Options: en, es, pt
```

## üåç Supported Languages

| Language | Code | Status | Coverage |
|----------|------|--------|----------|
| English | en | ‚úÖ Complete | Full |
| Spanish | es | ‚úÖ Complete | Full |
| Portuguese | pt | ‚úÖ Complete | Full |

## üìñ Translation Keys Structure

### Hierarchical Organization
Keys are organized hierarchically for better organization:

```typescript
{
  // Common UI elements
  "common.loading": "Loading...",
  "common.error": "An error occurred",
  "common.retry": "Retry",
  "common.cancel": "Cancel",
  "common.save": "Save",
  "common.delete": "Delete",
  "common.edit": "Edit",
  "common.add": "Add",
  "common.search": "Search",
  "common.filter": "Filter",
  "common.all": "All",
  "common.continue": "Continue",
  "common.back": "Back",
  "common.close": "Close",
  "common.storeName": "E-commerce Store",  // Store name for navbar
  
  // Product-related
  "products.title": "Products",
  "products.productTitle": "Title",  // Field label
  "products.addToCart": "Add to Cart",
  "products.outOfStock": "Out of Stock",
  "products.inStock": "In Stock",
  "products.price": "Price",
  "products.category": "Category",
  "products.stock": "Stock",
  "products.image": "Image",
  "products.description": "Description",
  "products.noProducts": "No products found",
  
  // Categories (for filtering)
  "categories.electronics": "Electronics",
  "categories.clothing": "Clothing",
  "categories.accessories": "Accessories",
  "categories.footwear": "Footwear",
  "categories.homeKitchen": "Home & Kitchen",
  "categories.bags": "Bags",
  "categories.sports": "Sports",
  
  // Cart-related
  "cart.title": "Shopping Cart",
  "cart.empty": "Your cart is empty",
  "cart.checkout": "Proceed to Checkout",
  "cart.continueShopping": "Continue Shopping",
  "cart.subtotal": "Subtotal",
  "cart.total": "Total",
  "cart.items": "items",
  "cart.item": "item",
  
  // Checkout-related
  "checkout.title": "Checkout",
  "checkout.shipping": "Shipping Information",
  "checkout.shippingAddress": "Shipping Address",
  "checkout.email": "Email",
  "checkout.name": "Full Name",
  "checkout.address": "Address",
  "checkout.city": "City",
  "checkout.postalCode": "Postal Code",
  "checkout.country": "Country",
  "checkout.orderSummary": "Order Summary",
  "checkout.relatedProducts": "You might also like",
  "checkout.success": "Order confirmed! Check your email for details.",
  
  // Admin-related
  "admin.title": "Admin Panel",
  "admin.dashboard": "Dashboard",
  "admin.products": "Products",
  "admin.orders": "Orders",
  "admin.logout": "Logout",
  "admin.login": "Admin Login",
  "admin.password": "Password",
  
  // Footer
  "footer.copyright": "All rights reserved",
  
  // Error messages
  "error.insufficientStock": "Insufficient stock",
  "error.paymentFailed": "Payment failed",
  "error.invalidEmail": "Invalid email address",
  "error.requiredField": "This field is required",
  "error.loadingProducts": "Error loading products"
}
```

### Category Translation Pattern
Categories are translated using a mapping system in `FilterButtons`:

```typescript
// CATEGORY_MAP maps DB values to i18n keys
const CATEGORY_MAP: Record<string, string> = {
  'Electronics': 'categories.electronics',
  'Clothing': 'categories.clothing',
  'Accessories': 'categories.accessories',
  'Footwear': 'categories.footwear',
  'Home & Kitchen': 'categories.homeKitchen',
  'Bags': 'categories.bags',
  'Sports': 'categories.sports',
}

// Usage in component
const label = category === 'all'
  ? t('common.all')
  : t(CATEGORY_MAP[category])
```

## üíª Usage Examples

### Basic Usage
```typescript
import { t } from '@/lib/i18n'

// In a component
export default function ProductCard({ product }) {
  return (
    <div>
      <h3>{product.title}</h3>
      <p>{t('products.price')}: ${product.price}</p>
      <button>{t('products.addToCart')}</button>
    </div>
  )
}
```

### With Dynamic Content
```typescript
function CartSummary({ itemCount, total }) {
  return (
    <div>
      <h2>{t('cart.title')}</h2>
      <p>
        {itemCount} {itemCount === 1 ? t('cart.item') : t('cart.items')}
      </p>
      <p>{t('cart.total')}: ${total}</p>
      <button>{t('cart.checkout')}</button>
    </div>
  )
}
```

### Category Translation Example
```typescript
function FilterButtons() {
  const currentCategory = 'Electronics'
  
  return (
    <Button>
      {t(CATEGORY_MAP[currentCategory])}  // Shows "Electr√≥nica" in Spanish
    </Button>
  )
}
```

### In Forms
```typescript
function CheckoutForm() {
  return (
    <form>
      <label>{t('checkout.email')}</label>
      <input type="email" placeholder={t('checkout.email')} />
      
      <label>{t('checkout.name')}</label>
      <input type="text" placeholder={t('checkout.name')} />
      
      <button type="submit">
        {t('checkout.submitOrder')}
      </button>
    </form>
  )
}
```

## ‚öôÔ∏è Changing Site Language

### Step 1: Update Environment Variable
Edit your `.env.local` file:

```bash
# Change language
NEXT_PUBLIC_LOCALE=es  # Spanish
# or
NEXT_PUBLIC_LOCALE=pt  # Portuguese
# or
NEXT_PUBLIC_LOCALE=en  # English (default)
```

### Step 2: Restart Development Server
```bash
npm run dev
```

### Step 3: Verify Changes
All text in the application should now appear in the selected language.

## ‚ûï Adding New Translations

### Step 1: Add to All Languages
Edit `lib/i18n/translations.ts` and add the new key to all language objects:

```typescript
export const translations = {
  en: {
    // ... existing translations
    "new.feature.text": "New Feature Text",
    "new.feature.button": "Click Me"
  },
  es: {
    // ... existing translations
    "new.feature.text": "Texto de Nueva Funci√≥n",
    "new.feature.button": "Haz Clic"
  },
  pt: {
    // ... existing translations
    "new.feature.text": "Texto do Novo Recurso",
    "new.feature.button": "Clique Aqui"
  }
}
```

### Step 2: Use in Components
```typescript
function NewFeature() {
  return (
    <div>
      <h2>{t('new.feature.text')}</h2>
      <button>{t('new.feature.button')}</button>
    </div>
  )
}
```

## üè∑Ô∏è Best Practices

### 1. Key Naming Conventions
- Use lowercase with dots as separators
- Be descriptive: `products.addToCart` not `add`
- Group related keys: `cart.title`, `cart.empty`, `cart.total`

### 2. Avoid Hardcoding Text
‚ùå **Don't do this:**
```typescript
<button>Add to Cart</button>
<p>Your cart is empty</p>
```

‚úÖ **Do this instead:**
```typescript
<button>{t('products.addToCart')}</button>
<p>{t('products.noProducts')}</p>
```

### 3. Handle Dynamic Content
```typescript
// For dynamic numbers
function CartItem({ count }) {
  return (
    <span>
      {count} {count === 1 ? t('cart.item') : t('cart.items')}
    </span>
  )
}

// For dynamic names
function Welcome({ userName }) {
  return (
    <h1>{t('common.welcome')}, {userName}!</h1>
  )
}
```

### 4. Fallback Behavior
The system includes fallbacks:
- If locale is not found ‚Üí falls back to English
- If translation key is not found ‚Üí returns the key itself
- Console warning for missing locales

## üß™ Testing Translations

### Manual Testing
1. Change `NEXT_PUBLIC_LOCALE` in `.env.local`
2. Restart development server
3. Navigate through the application
4. Verify all text appears correctly

### Automated Testing
```typescript
// Example test
describe('i18n', () => {
  it('should return correct translations', () => {
    process.env.NEXT_PUBLIC_LOCALE = 'es'
    expect(t('products.addToCart')).toBe('Agregar al Carrito')
    
    process.env.NEXT_PUBLIC_LOCALE = 'pt'
    expect(t('products.addToCart')).toBe('Adicionar ao Carrinho')
  })
  
  it('should fallback to key if translation missing', () => {
    expect(t('nonexistent.key')).toBe('nonexistent.key')
  })
})
```

## üîç Debugging

### Common Issues

#### Translation not showing
1. Check if key exists in translations object
2. Verify locale is set correctly
3. Check browser console for warnings

#### Wrong language displayed
1. Check `NEXT_PUBLIC_LOCALE` value
2. Ensure server was restarted after changes
3. Check for typos in locale code

#### Missing translations
1. Add key to all language objects
2. Follow naming conventions
3. Keep translations consistent

### Debug Helper
Add this temporary debug component:
```typescript
function DebugTranslations() {
  const currentLocale = process.env.NEXT_PUBLIC_LOCALE || 'en'
  
  return (
    <div className="fixed bottom-4 right-4 bg-black text-white p-4 rounded">
      <p>Current locale: {currentLocale}</p>
      <p>Sample: {t('common.loading')}</p>
    </div>
  )
}
```

## üöÄ Performance Considerations

### Bundle Size
- Translation object is included in bundle
- Only one language loaded at a time
- Tree-shaking removes unused translations

### Runtime Performance
- Simple object lookup (O(1))
- No external dependencies
- No runtime locale switching (build-time only)

### Memory Usage
- Single language in memory
- Minimal overhead
- Efficient for small-medium translation sets

## üîÑ Migration from Other i18n Systems

### From next-i18next
```typescript
// Before
import { useTranslation } from 'next-i18next'
const { t } = useTranslation()

// After
import { t } from '@/lib/i18n'
// Same usage: t('key')
```

### From react-i18next
```typescript
// Before
import { useTranslation } from 'react-i18next'
const { t } = useTranslation()

// After
import { t } from '@/lib/i18n'
// Same usage: t('key')
```

## üìö Additional Resources

- [MDN: Internationalization](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)
- [W3C: i18n Best Practices](https://www.w3.org/International/geek-faq/)
- [Unicode CLDR](https://cldr.unicode.org/)

## üéØ Summary

This i18n system provides:
- ‚úÖ Zero external dependencies
- ‚úÖ Type-safe translations
- ‚úÖ Simple API (`t('key')`)
- ‚úÖ Build-time locale switching
- ‚úÖ Fallback mechanisms
- ‚úÖ Easy to extend and maintain

The system is designed for simplicity and performance while providing full internationalization capabilities for the e-commerce platform.
